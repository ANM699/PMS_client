(this.webpackJsonppms=this.webpackJsonppms||[]).push([[0],{114:function(e,t,a){e.exports={container:"_2RVmFXkm3NpCTVXrhpAky_",content:"_2Htpzx3R8oKPu3PkWf4WoK",main:"_1f5ImrUK28jULxBPy6Vr4Z"}},143:function(e,t,a){e.exports={container:"_1OudY3eOKhometcdjAwwJe",block:"_3XQvD5xzQqFYVc82P0lIj5",todo:"F8xQiMGthcmBSQ-2y0WyE",doing:"_3iTTJmnixGLrDuefYG5tpt",done:"_27SZsenZ6rYbNWvlmf0x5x"}},164:function(e,t,a){e.exports={header:"_3KC7A6KeRiBRBNS8pjubt2",logout:"_2ZSJ5f9P9bbeghV5GDeiDl",trigger:"_1HT5wiUkXowZkSyhDkNL_r",title:"_3PD8D_5zvRE42Yw2v6pHeH"}},212:function(e,t,a){e.exports={container:"_28Yq8Uj4udGSGVy9BijsDd",title:"_3qdcpPcztQVfUl2awh8bA6",taskList:"r7XB1Ka3JINz4aqCER96g"}},243:function(e,t,a){e.exports={sider:"_1ouATjjGDUa7atLAzCEEI1",logo:"_11ozg1j2cLMixBMi6Bvoxz"}},244:function(e,t,a){e.exports={container:"_2HGpQcOxDIzDn9vTQMCg0m",date:"_1FIFhu2ilokbdq6x52XLA-"}},355:function(e,t,a){e.exports={curSprint:"_21kfxKD7nJ8vn4TuGLGB3u"}},375:function(e,t,a){e.exports=a(661)},660:function(e,t,a){},661:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),o=a.n(c),l=a(49),i=a(78),s=a(35),u=a(11),d=a(365),m=a(61),p=a(330),f=a(331),E=a(9),b={username:"",email:"",msg:""};var v={projectName:"",startDate:null,endDate:null,description:"",msg:""};var j=a(69),g=[];var h=Object(m.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_SUCCESS":case"RECEIVE_USER":return t.data;case"RESET_USER":return Object(E.a)(Object(E.a)({},b),{},{msg:t.data});case"ERROR_MSG":return Object(E.a)(Object(E.a)({},e),{},{msg:t.data});default:return e}},project:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SWITCH_PROJECT":return t.data;case"RESET_PROJECT":return Object(E.a)(Object(E.a)({},v),{},{msg:t.data});case"ERROR_MSG":return Object(E.a)(Object(E.a)({},e),{},{msg:t.data});default:return e}},sprints:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVE_SPRINTS":return t.data;case"CREATE_SPRINT":return[].concat(Object(j.a)(e),[t.data]);default:return e}}}),k=Object(m.createStore)(h,Object(f.composeWithDevTools)(Object(m.applyMiddleware)(p.a))),O=a(668),y=a(675),D=a(363),x=a(676),I=a(37),_=a(677),S=a(678),C=a(29),w=a.n(C),T=a(114),R=a.n(T),N=a(59),Y=a.n(N),P=a(94),F=a(210),M=a.n(F),V=a(16),A=a.n(V),q="http://mock";A.a.mock("".concat(q,"/users/login"),"post",(function(e){var t=A.a.mock("@id");return w.a.set("userId",t),{code:0,data:{username:JSON.parse(e.body).username,_id:t}}})),A.a.mock("".concat(q,"/users/register"),"post",(function(e){var t=JSON.parse(e.body);if("guoyunxiang"===t.username)return{code:1,msg:"\u7528\u6237\u540d\u5df2\u7ecf\u88ab\u6ce8\u518c"};var a=A.a.mock("@id");return w.a.set("userId",a),{code:0,data:{username:t.username,_id:a}}})),A.a.mock("".concat(q,"/users/user"),"get",(function(){return{code:0,data:{username:A.a.mock("@last"),_id:w.a.get("userId")}}})),A.a.mock("".concat(q,"/projects/list"),"get",(function(){var e=A.a.mock({"data|5-10":[{_id:"@id",projectName:"@ctitle",description:"@cparagraph(2,3)",startDate:"2020-07-14",endDate:"2020-12-24"}]}).data;return{code:0,data:Object(j.a)(e)}})),A.a.mock("".concat(q,"/projects/create"),"post",(function(e){return{code:0,data:Object(E.a)(Object(E.a)({},JSON.parse(e.body)),{},{_id:A.a.mock("@id")})}})),A.a.mock(RegExp("".concat(q,"/projects/edit/")+".*"),"post",(function(e){return{code:0,data:Object(E.a)({},JSON.parse(e.body))}})),A.a.mock("".concat(q,"/projects/project"),"get",(function(){return{code:0,data:{projectName:A.a.mock("@ctitle"),description:A.a.mock("@cparagraph(2,3)"),_id:w.a.get("projectId"),startDate:"2020-07-14",endDate:"2020-12-24"}}})),A.a.mock(RegExp("".concat(q,"/tasks/list")+".*"),"get",(function(e){return Object(E.a)({code:0},A.a.mock({"data|10-15":[{_id:"@id",content:"@csentence","status|1":["todo","doing","done"],storyId:"@id",projectId:w.a.get("projectId"),createDate:"@date",startDate:function(){return"todo"!==this.status?A.a.mock("@date"):null},endDate:function(){return"done"===this.status?A.a.mock("@date"):null},"users|0-5":[{_id:"@id","avatar|1":["#f56a00","#7265e6","#00a2ae"],username:"@last"}]}]}))})),A.a.mock("".concat(q,"/projects/members"),"get",(function(){return Object(E.a)({code:0},A.a.mock({"data|8-12":[{_id:"@id","avatar|1":["#f56a00","#7265e6","#00a2ae"],username:"@last",email:"@email","roles|1-4":[{"color|1":["#f56a00","#7265e6","#00a2ae","#ffbf00"],"name|1":["\u9879\u76ee\u7ecf\u7406","\u524d\u7aef\u5f00\u53d1","\u540e\u7aef\u5f00\u53d1","UI\u8bbe\u8ba1"]}]}]}))})),A.a.mock("".concat(q,"/users/list"),"get",(function(){return Object(E.a)({code:0},A.a.mock({"data|5-8":[{_id:"@id","avatar|1":["#f56a00","#7265e6","#00a2ae"],username:"@last",email:"@email"}]}))})),A.a.mock("".concat(q,"/sprints/create"),"post",(function(e){return{code:0,data:Object(E.a)(Object(E.a)({_id:A.a.mock("@id")},JSON.parse(e.body)),{},{tasks:{todo:[],doing:[],done:[]}})}})),A.a.mock("".concat(q,"/sprints/list"),"get",(function(){return{code:0,data:[Object(E.a)({_id:A.a.mock("@id"),startDate:"2020-07-14",endDate:"2020-07-30"},A.a.mock({"tasks|10-20":[{_id:"@id",content:"@csentence","status|1":["todo","doing","done"],projectId:w.a.get("projectId"),createDate:"@date",startDate:function(){return"todo"!==this.status?A.a.mock("@date"):null},endDate:function(){return"done"===this.status?A.a.mock("@date"):null},"users|0-5":[{_id:"@id","avatar|1":["#f56a00","#7265e6","#00a2ae"],username:"@last"}]}]})),Object(E.a)({_id:A.a.mock("@id"),startDate:"2020-07-31",endDate:"2020-08-26"},A.a.mock({"tasks|10-20":[{_id:"@id",content:"@csentence","status|1":["todo","doing","done"],projectId:w.a.get("projectId"),createDate:"@date",startDate:function(){return"todo"!==this.status?A.a.mock("@date"):null},endDate:function(){return"done"===this.status?A.a.mock("@date"):null},"users|0-5":[{_id:"@id","avatar|1":["#f56a00","#7265e6","#00a2ae"],username:"@last"}]}]})),Object(E.a)({_id:A.a.mock("@id"),startDate:"2020-08-27",endDate:"2020-09-13"},A.a.mock({"tasks|10-20":[{_id:"@id",content:"@csentence","status|1":["todo","doing","done"],projectId:w.a.get("projectId"),createDate:"@date",startDate:function(){return"todo"!==this.status?A.a.mock("@date"):null},endDate:function(){return"done"===this.status?A.a.mock("@date"):null},"users|0-5":[{_id:"@id","avatar|1":["#f56a00","#7265e6","#00a2ae"],username:"@last"}]}]}))]}})),A.a.mock("".concat(q,"/stories/list"),"get",(function(){return Object(E.a)({code:0},A.a.mock({"data|8-10":[{_id:"@id","role|1":["\u7528\u6237","VIP","\u7ba1\u7406\u5458","\u9879\u76ee\u7ecf\u7406"],activity:"@cword(10, 15)",date:"@date","priority|1":[0,1,2],businessValue:"@cword(10, 15)","tasks|3-5":[{_id:"@id",content:"@csentence","status|1":["todo","doing","done"],projectId:w.a.get("projectId"),createDate:"@date",startDate:function(){return"todo"!==this.status?A.a.mock("@date"):null},endDate:function(){return"done"===this.status?A.a.mock("@date"):null},"users|0-5":[{_id:"@id","avatar|1":["#f56a00","#7265e6","#00a2ae"],username:"@last"}]}]}]}))})),A.a.mock("".concat(q,"/tasks/create"),"post",(function(e){return{code:0,data:Object(E.a)(Object(E.a)({},JSON.parse(e.body)),{},{_id:A.a.mock("@id"),projectId:w.a.get("projectId")})}})),A.a.mock("".concat(q,"/storys/create"),"post",(function(e){return{code:0,data:Object(E.a)(Object(E.a)({},JSON.parse(e.body)),{},{_id:A.a.mock("@id"),tasks:{todo:[],doing:[],done:[]},projectId:w.a.get("projectId")})}})),A.a.mock(RegExp("".concat(q,"/storys/edit/")+".*"),"post",(function(e){return{code:0,data:Object(E.a)({},JSON.parse(e.body))}})),A.a.mock(RegExp("".concat(q,"/tasks/edit/")+".*"),"post",(function(e){return{code:0,data:Object(E.a)({},JSON.parse(e.body))}})),A.a.mock("".concat(q,"/test"),"get",{code:1,msg:"\u8bf7\u6c42\u8fd4\u56de\u7684\u975e\u6b63\u5e38\u4fe1\u606f"});var U=a(368);function G(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET";if("GET"===a){var n="";return Object.keys(t).forEach((function(e){n+=e+"="+t[e]+"&"})),n&&(n="?"+n.substring(0,n.length-1)),M.a.get("http://mock"+e+n)}return M.a.post("http://mock"+e,t)}M.a.interceptors.response.use((function(e){var t=e.data;if(200!==e.status||0===t.code)return e;U.b.error(t.msg)}));var z=function(e){return G("/users/login",{username:e.username,password:e.password},"POST")},J=function(e){return G("/users/register",{username:e.username,password:e.password},"POST")},K=function(e){return G("/tasks/list",e)},H=function(){return G("/projects/members")},B=function(){return G("/sprints/list")},L=function(e){return G("/sprints/create",{startDate:e.startDate,endDate:e.endDate},"POST")},Q=function(){return G("/test")},W=function(e){return{type:"AUTH_SUCCESS",data:e}},X=function(e){return{type:"ERROR_MSG",data:e}},Z=function(e){return{type:"RESET_USER",data:e}},$=Object(l.b)((function(e){return{user:e.user}}),{login:function(e){var t=e.username,a=e.password;return t&&a?function(){var t=Object(P.a)(Y.a.mark((function t(a){var n,r;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z(e);case 2:n=t.sent,0===(r=n.data).code?a(W(r.data)):a(X(r.msg));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}():X("\u8bf7\u8f93\u5165\u7528\u6237\u540d\u548c\u5bc6\u7801")}})((function(e){var t=e.login,a=e.history,n=e.user,c=w.a.get("userId"),o=n.msg;return c?r.a.createElement(s.a,{to:"/"}):r.a.createElement("div",{className:R.a.container},r.a.createElement("div",{className:R.a.content},r.a.createElement("div",{className:R.a.main},r.a.createElement("h1",{style:{textAlign:"center"}},"\u9879\u76ee\u7ba1\u7406\u7cfb\u7edf"),r.a.createElement(O.a,{wrapperCol:{span:24},name:"loginForm",initialValues:{remember:!0},onFinish:function(e){t(e)},onFinishFailed:function(e){console.log("Failed:",e)}},r.a.createElement(O.a.Item,null,o?r.a.createElement(y.a,{type:"error",message:o,showIcon:!0}):null),r.a.createElement(O.a.Item,{name:"username",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d\uff01"}]},r.a.createElement(D.a,{prefix:r.a.createElement(_.a,{className:"site-form-item-icon"}),placeholder:"\u7528\u6237\u540d"})),r.a.createElement(O.a.Item,{name:"password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801\uff01"}]},r.a.createElement(D.a.Password,{prefix:r.a.createElement(S.a,{className:"site-form-item-icon"}),placeholder:"\u5bc6\u7801"})),r.a.createElement(O.a.Item,null,r.a.createElement(x.b,null,r.a.createElement(I.a,{type:"primary",htmlType:"submit"},"\u767b\u5f55"),r.a.createElement(I.a,{htmlType:"button",onClick:function(){a.replace("/register")}},"\u6ce8\u518c\u8d26\u53f7")))))))})),ee=Object(l.b)((function(e){return{user:e.user}}),{register:function(e){var t=e.username,a=e.password,n=e.password2;return t&&a&&n?a!==n?X("\u8f93\u5165\u7684\u5bc6\u7801\u4e0d\u4e00\u81f4"):function(){var t=Object(P.a)(Y.a.mark((function t(a){var n,r;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,J(e);case 2:n=t.sent,0===(r=n.data).code?a(W(r.data)):a(X(r.msg));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}():X("\u8bf7\u8f93\u5165\u7528\u6237\u540d\u548c\u5bc6\u7801")}})((function(e){var t=e.register,a=e.history,n=e.user,c=w.a.get("userId"),o=n.msg;return c?r.a.createElement(s.a,{to:"/"}):r.a.createElement("div",{className:R.a.container},r.a.createElement("div",{className:R.a.content},r.a.createElement("div",{className:R.a.main},r.a.createElement(O.a,{wrapperCol:{span:24},name:"loginForm",initialValues:{remember:!0},onFinish:function(e){t(e)},onFinishFailed:function(e){console.log("Failed:",e)}},r.a.createElement(O.a.Item,null,o?r.a.createElement(y.a,{type:"error",message:o,showIcon:!0}):null),r.a.createElement(O.a.Item,{name:"username",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d\uff01"}]},r.a.createElement(D.a,{prefix:r.a.createElement(_.a,{className:"site-form-item-icon"}),placeholder:"\u7528\u6237\u540d"})),r.a.createElement(O.a.Item,{name:"password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801\uff01"}]},r.a.createElement(D.a.Password,{prefix:r.a.createElement(S.a,{className:"site-form-item-icon"}),placeholder:"\u5bc6\u7801"})),r.a.createElement(O.a.Item,{name:"password2",rules:[{required:!0,message:"\u8bf7\u518d\u6b21\u8f93\u5165\u5bc6\u7801\uff01"}]},r.a.createElement(D.a.Password,{prefix:r.a.createElement(S.a,{className:"site-form-item-icon"}),placeholder:"\u5bc6\u7801"})),r.a.createElement(O.a.Item,null,r.a.createElement(x.b,null,r.a.createElement(I.a,{type:"primary",htmlType:"submit"},"\u6ce8\u518c"),r.a.createElement(I.a,{htmlType:"button",onClick:function(){a.replace("/login")}},"\u5df2\u6709\u8d26\u53f7")))))))})),te=a(19),ae=a(662),ne=a(669),re=a(690),ce=a(60),oe=a(679),le=a(680),ie=a(681),se=a(682),ue=a(683),de=a(684),me=a(685),pe=a(243),fe=a.n(pe),Ee=[{path:"/project/profile",title:"\u9879\u76ee\u72b6\u6001",icon:r.a.createElement(oe.a,null)},{path:"/project/member",title:"\u6210\u5458\u7ba1\u7406",icon:r.a.createElement(le.a,null)},{path:"/project/story",title:"\u9700\u6c42\u5206\u6790",icon:r.a.createElement(ie.a,null)},{path:"/project/sprint",title:"\u9636\u6bb5\u8bbe\u7f6e",icon:r.a.createElement(se.a,null)},{path:"/project/board",title:"\u4efb\u52a1\u770b\u677f",icon:r.a.createElement(ue.a,null)},{path:"/project/meeting",title:"\u4f1a\u8bae\u7eaa\u8981",icon:r.a.createElement(de.a,null)},{path:"/account",title:"\u4e2a\u4eba\u4e2d\u5fc3",icon:r.a.createElement(_.a,null)},{path:"/test",title:"\u529f\u80fd\u6d4b\u8bd5",icon:r.a.createElement(me.a,null)}],be=Object(s.g)((function(e){var t=e.visiable,a=e.location.pathname,n=Ee.findIndex((function(e){return new RegExp(e.path).test(a)})).toString();return r.a.createElement(ae.a.Sider,{trigger:null,collapsible:!0,collapsed:e.collapsed,className:fe.a.sider,style:{display:t?"":"none"}},r.a.createElement("div",{className:fe.a.logo},"PMS"),r.a.createElement(ce.a,{theme:"dark",mode:"inline",selectedKeys:[n]},Ee.map((function(t,a){return r.a.createElement(ce.a.Item,{key:a,icon:t.icon,onClick:function(){t.path&&e.history.replace(t.path)}},t.title)}))))})),ve=a(672),je=a(686),ge=a(687),he=a(688),ke=a(164),Oe=a.n(ke),ye=function(e){return r.a.createElement(ae.a.Header,{className:Oe.a.header},e.visiable&&r.a.createElement(e.collapsed?je.a:ge.a,{className:Oe.a.trigger,onClick:e.toggle}),r.a.createElement("div",{className:Oe.a.title},r.a.createElement(i.b,{to:"/"},e.projectName)),r.a.createElement("div",null,r.a.createElement(ve.a,{style:{backgroundColor:"#00a2ae",marginRight:8},icon:r.a.createElement(_.a,null)}),e.username),r.a.createElement(he.a,{className:Oe.a.logout,onClick:e.logout}))},De=a(667),xe=a(691),Ie=a(666),_e=a(689),Se=Ie.a.Column;function Ce(e){var t=e.data;return r.a.createElement(Ie.a,{dataSource:t,pagination:!1,showHeader:!1,rowKey:"_id"},r.a.createElement(Se,{title:"\u4fe1\u606f",dataIndex:"projectName",key:"projectName",render:function(t,a){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,r.a.createElement("a",{onClick:function(){return e.onConfirm(a)}},t)),r.a.createElement("div",{style:{color:"rgba(0,0,0,.45)",marginTop:"4px"}},a.description))}}),r.a.createElement(Se,{title:"\u65f6\u95f4",key:"date",render:function(e,t){return"".concat(t.startDate,"~").concat(t.endDate)}}),r.a.createElement(Se,{title:"\u64cd\u4f5c",dataIndex:"_id",key:"action",render:function(t,a){return r.a.createElement("a",{onClick:function(t){t.preventDefault(),e.onItemEditClick(a)}},r.a.createElement(_e.a,null))}}))}var we=a(665),Te=a(25),Re=a.n(Te),Ne=we.a.RangePicker;function Ye(e){var t=e.visible,a=e.onOk,c=e.onCancel,o=e.project,l=O.a.useForm(),i=Object(te.a)(l,1)[0];return Object(n.useEffect)((function(){if(o){var e=[Re()(o.startDate),Re()(o.endDate)];i.setFieldsValue(Object(E.a)(Object(E.a)({},o),{},{rangeDate:e}))}else i.resetFields()})),r.a.createElement(ne.a,{forceRender:!0,title:o?"\u7f16\u8f91\u9879\u76ee":"\u521b\u5efa\u9879\u76ee",width:640,visible:t,onOk:function(){i.validateFields().then((function(e){a(e)})).catch((function(e){console.log("\u9a8c\u8bc1\u5931\u8d25\uff1a",e)}))},onCancel:c,okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88"},r.a.createElement(O.a,{form:i,labelCol:{span:5},wrapperCol:{span:16}},r.a.createElement(O.a.Item,{name:"projectName",label:"\u9879\u76ee\u540d\u79f0",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u9879\u76ee\u540d\u79f0\uff01"}]},r.a.createElement(D.a,{placeholder:"\u8bf7\u8f93\u5165"})),r.a.createElement(O.a.Item,{name:"rangeDate",label:"\u9879\u76ee\u65f6\u95f4",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u9879\u76ee\u65f6\u95f4\uff01"}]},r.a.createElement(Ne,{style:{width:"100%"}})),r.a.createElement(O.a.Item,{name:"description",label:"\u9879\u76ee\u7b80\u4ecb",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u81f3\u5c11\u4e94\u4e2a\u5b57\u7b26\u7684\u9879\u76ee\u7b80\u4ecb\uff01",min:5}]},r.a.createElement(D.a.TextArea,{rows:4,placeholder:"\u8bf7\u8f93\u5165\u81f3\u5c11\u4e94\u4e2a\u5b57\u7b26"}))))}var Pe=function(e){return{type:"SWITCH_PROJECT",data:e}},Fe=function(e){return{type:"RESET_PROJECT",data:e}},Me={switchProject:Pe},Ve=Object(l.b)((function(e){return{project:e.project}}),Me)((function(e){var t=Object(n.useState)(!1),a=Object(te.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)([]),i=Object(te.a)(l,2),s=i[0],u=i[1],d=Object(n.useState)(null),m=Object(te.a)(d,2),p=m[0],f=m[1];Object(n.useEffect)((function(){G("/projects/list").then((function(e){var t=e.data;0===t.code&&u(t.data)}))}),[]);var b=function(e){o(!0),f(e)};return r.a.createElement("div",null,r.a.createElement(De.a,{title:"\u6211\u7684\u9879\u76ee",extra:r.a.createElement("a",{onClick:function(e){e.preventDefault(),b()}},r.a.createElement(xe.a,{style:{fontSize:"24px"}}))},r.a.createElement(Ce,{data:s,onConfirm:function(t){ne.a.confirm({title:"\u9009\u62e9\u5e76\u5207\u6362\u81f3\u8be5\u9879\u76ee\uff1f",icon:r.a.createElement(re.a,null),cancelText:"\u53d6\u6d88",okText:"\u786e\u5b9a",onOk:function(){e.switchProject(t),w.a.set("projectId",t._id),e.history.push("/project/profile")}})},onItemEditClick:b})),r.a.createElement(Ye,{visible:c,onOk:function(t){var a,n=p?p._id:"",r=t.rangeDate;t.startDate=r[0].format("YYYY-MM-DD"),t.endDate=r[1].format("YYYY-MM-DD"),n?function(e){var t=e._id,a=e.projectName,n=e.startDate,r=e.endDate,c=e.description;return G("/projects/edit/".concat(t),{_id:t,projectName:a,startDate:n,endDate:r,description:c},"POST")}(Object(E.a)(Object(E.a)({},t),{},{_id:n})).then((function(t){var a=t.data;if(0===a.code){var r=s.map((function(e){return e._id===n?a.data:e}));o(!1),u(r),n===e.project._id&&e.switchProject(a.data)}})):(a=t,G("/projects/create",{projectName:a.projectName,startDate:a.startDate,endDate:a.endDate,description:a.description},"POST")).then((function(e){var t=e.data;0===t.code&&(o(!1),u([t.data].concat(Object(j.a)(s))))}))},onCancel:function(){o(!1)},project:p}))})),Ae=a(671),qe=a(142),Ue=a(83),Ge=a(143),ze=a.n(Ge);function Je(e,t){for(var a=[],n=0;n<e;n++){var c=r.a.createElement("div",{key:n,className:"".concat(ze.a.block," ").concat(t)});a.push(c)}return a}var Ke=function(e){return r.a.createElement("div",{className:ze.a.container},Je(e.todo,ze.a.todo),Je(e.doing,ze.a.doing),Je(e.done,ze.a.done))},He=a(53);a(604),a(626),a(637),a(638);var Be=Ae.a.Countdown,Le={title:{text:"\u71c3\u5c3d\u56fe"},legend:{data:["\u5269\u4f59\u4efb\u52a1"],selectedMode:!1,top:10},grid:{left:"2%",right:"2%",bottom:"2%",containLabel:!0},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},xAxis:{type:"category",boundaryGap:!1,data:["09-17","09-18","09-19","09-20","09-21","09-22","09-23","09-24","09-25","09-26","09-27","09-28","09-29"]},yAxis:{type:"value"},series:[{name:"\u5269\u4f59\u4efb\u52a1",data:[56,50,55,48,40,30,24,22,15,11,8,3,2,1],type:"line",areaStyle:{}},{data:[["09-17",56],["09-29",0]],type:"line",lineStyle:{type:"dashed"}}]};var Qe=a(673);var We=a(137),Xe=a(97),Ze=a(205),$e=a(692),et=a(107),tt=a(244),at=a.n(tt);function nt(e){var t=e.task,a=e.index;return r.a.createElement(We.b,{draggableId:t._id,index:a},(function(e,a){return r.a.createElement("div",Object.assign({className:at.a.container,ref:e.innerRef},e.draggableProps,e.dragHandleProps),r.a.createElement(De.a,{hoverable:!0},r.a.createElement("p",null,t.content),r.a.createElement("div",{className:at.a.date},function(e){switch(e.status){case"todo":return"\u521b\u5efa\u4e8e"+Re()(e.createDate).format("MM-DD");case"doing":return"\u5f00\u59cb\u4e8e"+Re()(e.startDate).format("MM-DD");case"done":return"\u5b8c\u6210\u4e8e"+Re()(e.endDate).format("MM-DD")}}(t)),r.a.createElement("div",null,r.a.createElement(ve.a.Group,null,t.users.map((function(e){return r.a.createElement(et.a,{key:e._id,title:e.username,placement:"top"},r.a.createElement(ve.a,{style:{backgroundColor:e.avatar},icon:r.a.createElement(_.a,null)}))}))))))}))}var rt=a(212),ct=a.n(rt);function ot(e){var t=e.status,a=e.tasks,n=e.id;return r.a.createElement("div",{className:ct.a.container},r.a.createElement("h4",{className:ct.a.title,style:{backgroundColor:t.color}},t.display),r.a.createElement(We.c,{droppableId:n},(function(e){return r.a.createElement("div",Object.assign({className:ct.a.taskList,ref:e.innerRef},e.droppableProps),a.map((function(e,t){return r.a.createElement(nt,{key:e._id,task:e,index:t})})),e.placeholder)})))}var lt=a(369),it=Ie.a.Column;function st(e){var t=e.data,a=e.status,n=e.size,c=void 0===n?"default":n,o=e.onItemEditClick,l=e.editable,i=void 0===l||l;return r.a.createElement(Ie.a,{dataSource:t,pagination:!1,rowKey:"_id",size:c},r.a.createElement(it,{width:"90px",title:"\u72b6\u6001",dataIndex:"status",key:"status",render:function(e){var t=a[e];return r.a.createElement(lt.a,{color:t.color},t.display)}}),r.a.createElement(it,{title:"\u5185\u5bb9",dataIndex:"content",key:"content"}),r.a.createElement(it,{title:"\u53c2\u4e0e\u8005",dataIndex:"users",key:"users",render:function(e){return r.a.createElement(ve.a.Group,null,e.map((function(e){return r.a.createElement(et.a,{key:e._id,title:e.username,placement:"top"},r.a.createElement(ve.a,{style:{backgroundColor:e.avatar},icon:r.a.createElement(_.a,null)}))})))}}),r.a.createElement(it,{title:"\u521b\u5efa\u65e5\u671f",dataIndex:"createDate"}),r.a.createElement(it,{title:"\u5f00\u59cb\u65e5\u671f",dataIndex:"startDate"}),r.a.createElement(it,{title:"\u5b8c\u6210\u65e5\u671f",dataIndex:"endDate"}),i?r.a.createElement(it,{title:"\u64cd\u4f5c",dataIndex:"_id",key:"action",render:function(e,t){return r.a.createElement("a",{onClick:function(e){e.preventDefault(),o(t)}},r.a.createElement(_e.a,null))}}):null)}var ut=a(161),dt=ut.a.Option;function mt(e){var t=e.visible,a=e.onOk,c=e.onCancel,o=e.task,l=e.users,i=Object(n.useState)(),s=Object(te.a)(i,2),u=s[0],d=s[1],m=O.a.useForm(),p=Object(te.a)(m,1)[0];return Object(n.useEffect)((function(){if(o){d(o.status);var e=o.startDate?Re()(o.startDate):Re()(),t=o.endDate?Re()(o.endDate):Re()(),a=o.users.map((function(e){return e._id}));p.setFieldsValue(Object(E.a)(Object(E.a)({},o),{},{selectedUsers:a,startDate:e,endDate:t}))}else p.resetFields()}),[o]),r.a.createElement(ne.a,{forceRender:!0,title:"\u7f16\u8f91\u4efb\u52a1",width:640,visible:t,onOk:function(){p.validateFields().then((function(e){a(e)})).catch((function(e){console.log("\u9a8c\u8bc1\u5931\u8d25\uff1a",e)}))},onCancel:c,okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88"},r.a.createElement(O.a,{form:p,labelCol:{span:5},wrapperCol:{span:16}},r.a.createElement(O.a.Item,{name:"selectedUsers",label:"\u53c2\u4e0e\u8005",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u53c2\u4e0e\u8005\uff01"}]},r.a.createElement(ut.a,{showSearch:!0,placeholder:"\u9009\u62e9\u53c2\u4e0e\u8005",optionFilterProp:"title",optionLabelProp:"title",mode:"multiple"},l.map((function(e,t){return r.a.createElement(dt,{key:t,value:e._id,title:e.username},r.a.createElement(x.b,null,r.a.createElement(ve.a,{style:{backgroundColor:e.avatar},icon:r.a.createElement(_.a,null)}),r.a.createElement("div",null,r.a.createElement("a",null," ",e.username),r.a.createElement("div",{style:{color:"rgba(0,0,0,.45)"}},e.email))))})))),r.a.createElement(O.a.Item,{name:"status",label:"\u72b6\u6001"},r.a.createElement(Ze.a.Group,{name:"radiogroup",onChange:function(e){d(e.target.value)}},r.a.createElement(Ze.a,{value:"todo"},"\u672a\u5f00\u59cb"),r.a.createElement(Ze.a,{value:"doing"},"\u8fdb\u884c\u4e2d"),r.a.createElement(Ze.a,{value:"done"},"\u5df2\u5b8c\u6210"))),"todo"!==u?r.a.createElement(O.a.Item,{name:"startDate",label:"\u5f00\u59cb\u65e5\u671f",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5f00\u59cb\u65e5\u671f\uff01"}]},r.a.createElement(we.a,null)):null,"done"===u?r.a.createElement(O.a.Item,{name:"endDate",label:"\u5b8c\u6210\u65e5\u671f",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5b8c\u6210\u65e5\u671f\uff01"}]},r.a.createElement(we.a,null)):null))}function pt(e){var t=Object(n.useState)(!1),a=Object(te.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)({users:[]}),i=Object(te.a)(l,2),s=i[0],u=i[1],d=Object(n.useState)([]),m=Object(te.a)(d,2),p=m[0],f=m[1],b=Object(n.useState)(),v=Object(te.a)(b,2),g=v[0],h=v[1];return Object(n.useEffect)((function(){H().then((function(e){var t=e.data;0===t.code&&f(t.data)}))}),[]),Object(n.useEffect)((function(){h(e.data)}),[e.data]),r.a.createElement(r.a.Fragment,null,r.a.createElement(st,Object.assign({},e,{data:g,onItemEditClick:function(e){o(!0),u(e)}})),r.a.createElement(mt,{visible:c,onOk:function(t){t.startDate=t.startDate?t.startDate.format("YYYY-MM-DD"):null,t.endDate=t.endDate?t.endDate.format("YYYY-MM-DD"):null,t.users=p.filter((function(e){return-1!==t.selectedUsers.indexOf(e._id)}));var a=s._id;(function(e){return G("/tasks/edit/".concat(e._id),e,"POST")})(Object(E.a)(Object(E.a)({},s),t)).then((function(t){var n=t.data;if(0===n.code){var r=g.map((function(e){return e._id===a?n.data:e}));e.updateTasks(r),o(!1)}}))},onCancel:function(){o(!1)},task:s,users:[].concat(Object(j.a)(s.users),Object(j.a)(p))}))}function ft(e){var t={todo:[],doing:[],done:[]};return Array.isArray(e)&&e.forEach((function(e){t[e.status].push(e)})),t}var Et={todo:{color:"#4a9ff9",display:"\u672a\u5f00\u59cb"},doing:{color:"#f9944a",display:"\u8fdb\u884c\u4e2d"},done:{color:"#2ac06d",display:"\u5df2\u5b8c\u6210"}};function bt(e){var t=Object(n.useState)("board"),a=Object(te.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(""),i=Object(te.a)(l,2),s=i[0],u=i[1],d=Object(n.useState)({todo:[],doing:[],done:[]}),m=Object(te.a)(d,2),p=m[0],f=m[1];Object(n.useEffect)((function(){var t=e.match.params,a=t.type||"sprint",n=t.id||"530000197311083057";u(("sprint"===a?"\u9636\u6bb5":"\u9700\u6c42")+n),K({type:a,id:n}).then((function(e){var t=e.data;if(0===t.code){var a=ft(t.data);f(a)}}))}),[]);var E=Object.values(p).flat(),b=0===E.length?r.a.createElement(Xe.a,{image:Xe.a.PRESENTED_IMAGE_SIMPLE}):r.a.createElement(We.a,{onDragEnd:function(e){var t=e.destination,a=e.source,n=e.draggableId;if(t&&(t.droppableId!==a.droppableId||t.index!==a.index)){var r=a.droppableId,c=t.droppableId,o=p[r].find((function(e){return e._id===n}));o.status=c,"todo"===c&&(o.startDate=null,o.endDate=null),"doing"===c&&(o.startDate=Re()().format("YYYY-MM-DD"),o.endDate=null),"done"===c&&(o.endDate=Re()().format("YYYY-MM-DD"));var l=p[r],i=p[c];l.splice(a.index,1),i.splice(t.index,0,o),f(p)}}},r.a.createElement("div",{style:{display:"flex"}},Object.keys(Et).map((function(e,t){return r.a.createElement(ot,{status:Et[e],id:e,key:t,tasks:p[e]})})))),v=r.a.createElement(pt,{data:E,status:Et,updateTasks:function(e){f(ft(e))}});return r.a.createElement(De.a,{title:s,extra:r.a.createElement(Ze.a.Group,{buttonStyle:"solid",onChange:function(e){o(e.target.value)},value:c},r.a.createElement(Ze.a.Button,{value:"board"},r.a.createElement(ue.a,null)),r.a.createElement(Ze.a.Button,{value:"list"},r.a.createElement($e.a,null)))},"board"===c?b:v)}var vt=a(663),jt=a(693),gt=ut.a.Option;function ht(e){var t=e.visible,a=e.onOk,n=e.onCancel,c=e.member,o=e.users,l=e.roles,i=O.a.useForm(),s=Object(te.a)(i,1)[0];return r.a.createElement(ne.a,{forceRender:!0,title:c?"\u7f16\u8f91\u6210\u5458":"\u6dfb\u52a0\u6210\u5458",width:640,visible:t,onOk:function(){s.validateFields().then((function(e){a(e),s.resetFields()})).catch((function(e){console.log("\u9a8c\u8bc1\u5931\u8d25\uff1a",e)}))},onCancel:n,okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88"},r.a.createElement(O.a,{form:s,labelCol:{span:5},wrapperCol:{span:16}},r.a.createElement(O.a.Item,{name:"_id",label:"\u9879\u76ee\u6210\u5458",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u9879\u76ee\u6210\u5458\uff01"}]},r.a.createElement(ut.a,{showSearch:!0,placeholder:"\u9009\u62e9\u6210\u5458",optionLabelProp:"title",optionFilterProp:"title"},o.map((function(e,t){return r.a.createElement(gt,{key:t,value:e._id,title:e.username},r.a.createElement(x.b,null,r.a.createElement(ve.a,{style:{backgroundColor:e.avatar},icon:r.a.createElement(_.a,null)}),r.a.createElement("div",null,r.a.createElement("a",null," ",e.username),r.a.createElement("div",{style:{color:"rgba(0,0,0,.45)"}},e.email))))})))),r.a.createElement(O.a.Item,{name:"roles",label:"\u6210\u5458\u89d2\u8272",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6210\u5458\u89d2\u8272\uff01"}]},r.a.createElement(ut.a,{mode:"multiple",allowClear:!0,placeholder:"\u9009\u62e9\u89d2\u8272"},l.map((function(e,t){return r.a.createElement(gt,{key:t,value:e.name},e.name)}))))))}var kt=[{color:"#f56a00",name:"\u9879\u76ee\u7ecf\u7406"},{color:"#7265e6",name:"\u524d\u7aef\u5f00\u53d1"},{color:"#00a2ae",name:"\u540e\u7aef\u5f00\u53d1"},{color:"#ffbf00",name:"UI\u8bbe\u8ba1"}];var Ot=a(664),yt=a(694);function Dt(e){var t=e.visible,a=e.onOk,n=e.onCancel,c=O.a.useForm(),o=Object(te.a)(c,1)[0];return r.a.createElement(ne.a,{forceRender:!0,title:"\u65b0\u589e\u4efb\u52a1",width:640,visible:t,onOk:function(){o.validateFields().then((function(e){a(e),o.resetFields()})).catch((function(e){console.log("\u9a8c\u8bc1\u5931\u8d25\uff1a",e)}))},onCancel:n,okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88"},r.a.createElement(O.a,{initialValues:{createDate:Re()()},form:o,labelCol:{span:5},wrapperCol:{span:16}},r.a.createElement(O.a.Item,{name:"content",label:"\u4efb\u52a1\u5185\u5bb9",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u81f3\u5c11\u4e94\u4e2a\u5b57\u7b26\u7684\u4efb\u52a1\u5185\u5bb9\uff01",min:5}]},r.a.createElement(D.a.TextArea,{rows:4,placeholder:"\u8bf7\u8f93\u5165\u81f3\u5c11\u4e94\u4e2a\u5b57\u7b26"})),r.a.createElement(O.a.Item,{name:"createDate",label:"\u521b\u5efa\u65e5\u671f"},r.a.createElement(we.a,null))))}function xt(e){var t=e.visible,a=e.onOk,c=e.onCancel,o=e.story,l=O.a.useForm(),i=Object(te.a)(l,1)[0];return Object(n.useEffect)((function(){if(o){var e=Re()(o.date);i.setFieldsValue(Object(E.a)(Object(E.a)({},o),{},{date:e}))}else i.resetFields()})),r.a.createElement(ne.a,{forceRender:!0,title:o?"\u7f16\u8f91\u9700\u6c42":"\u65b0\u589e\u9700\u6c42",width:640,visible:t,onOk:function(){i.validateFields().then((function(e){a(e)})).catch((function(e){console.log("\u9a8c\u8bc1\u5931\u8d25\uff1a",e)}))},onCancel:c,okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88"},r.a.createElement(O.a,{initialValues:{date:Re()(),priority:0},form:i,labelCol:{span:5},wrapperCol:{span:16}},r.a.createElement(O.a.Item,{name:"role",label:"\u89d2\u8272",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u89d2\u8272\uff01"}]},r.a.createElement(D.a,{placeholder:"\u8bf7\u8f93\u5165"})),r.a.createElement(O.a.Item,{name:"activity",label:"\u884c\u4e3a",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u81f3\u5c11\u4e94\u4e2a\u5b57\u7b26\uff01",min:5}]},r.a.createElement(D.a.TextArea,{rows:2,placeholder:"\u8bf7\u8f93\u5165\u81f3\u5c11\u4e94\u4e2a\u5b57\u7b26"})),r.a.createElement(O.a.Item,{name:"businessValue",label:"\u76ee\u7684",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u81f3\u5c11\u4e94\u4e2a\u5b57\u7b26\uff01",min:5}]},r.a.createElement(D.a.TextArea,{rows:2,placeholder:"\u8bf7\u8f93\u5165\u81f3\u5c11\u4e94\u4e2a\u5b57\u7b26"})),r.a.createElement(O.a.Item,{name:"date",label:"\u63d0\u51fa\u65e5\u671f",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u63d0\u51fa\u65e5\u671f\uff01"}]},r.a.createElement(we.a,null)),r.a.createElement(O.a.Item,{name:"priority",label:"\u4f18\u5148\u7ea7"},r.a.createElement(Ze.a.Group,{name:"radiogroup"},r.a.createElement(Ze.a,{value:0},"\u4f4e"),r.a.createElement(Ze.a,{value:1},"\u4e2d"),r.a.createElement(Ze.a,{value:2},"\u9ad8")))))}var It=Ie.a.Column,_t=[{color:"#2ac06d",display:"\u4f4e"},{color:"#f9944a",display:"\u4e2d"},{color:"#ff4d4f",display:"\u9ad8"}];var St=a(695),Ct=a(371),wt=a(670);function Tt(e){var t=e.columns,a=e.visible,n=e.onCancel,c=e.onOk,o=Object(Ct.a)(e,["columns","visible","onCancel","onOk"]);return r.a.createElement(ne.a,{forceRender:!0,title:"\u5bfc\u5165\u4efb\u52a1",width:1200,visible:a,okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onOk:c,onCancel:n},r.a.createElement(wt.a,Object.assign({rowKey:function(e){return e._id}},o,{showSelectAll:!1}),(function(e){var a=e.filteredItems,n=e.onItemSelectAll,c=e.onItemSelect,o=e.selectedKeys,l={onSelectAll:function(e,t){var a=t.map((function(e){return e._id}));n(e?a:o,e)},onSelect:function(e,t){var a=e._id;c(a,t)},selectedRowKeys:o};return r.a.createElement(Ie.a,{pagination:!1,scroll:{y:300},rowSelection:l,rowKey:"_id",columns:t,dataSource:a,size:"small",onRow:function(e){var t=e._id;return{onClick:function(){c(t,!o.includes(t))}}}})})))}var Rt=function(e){return{type:"CREATE_SPRINT",data:e}},Nt=a(355),Yt=a.n(Nt),Pt=we.a.RangePicker,Ft=Ie.a.Column,Mt=[{dataIndex:"content",title:"\u4efb\u52a1"},{dataIndex:"createDate",title:"\u521b\u5efa\u65f6\u95f4"}],Vt={createSprint:function(e){return function(){var t=Object(P.a)(Y.a.mark((function t(a){var n,r;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L(e);case 2:n=t.sent,0===(r=n.data).code&&a(Rt(r.data));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},getSprints:function(){return function(){var e=Object(P.a)(Y.a.mark((function e(t){var a,n;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B();case 2:a=e.sent,0===(n=a.data).code&&t({type:"RECEIVE_SPRINTS",data:n.data});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},At=Object(l.b)((function(e){return{project:e.project,sprints:e.sprints}}),Vt)((function(e){var t=Object(n.useState)(!1),a=Object(te.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(!1),s=Object(te.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)([]),p=Object(te.a)(m,2),f=p[0],b=p[1],v=Object(n.useState)([]),g=Object(te.a)(v,2),h=g[0],k=g[1],y=Object(n.useState)([]),D=Object(te.a)(y,2),x=D[0],I=D[1],_=Object(n.useState)(null),S=Object(te.a)(_,2),C=S[0],w=S[1],T=Object(n.useRef)(null);Object(n.useEffect)((function(){e.getSprints(),B().then((function(e){var t=e.data;0===t.code&&(t.data.forEach((function(e){var t=e.tasks;e.tasks=ft(t)})),k(t.data))})),K().then((function(e){var t=e.data,a=t.data.filter((function(e){return"todo"===e.status}));0===t.code&&I(a)}))}),[]);var R=e.project,N=R.startDate,Y=R.endDate,P=h.length,F=N;if(P>0){var M=h[P-1].endDate;F=Re()(M).add(1,"days").format("YYYY-MM-DD")}return r.a.createElement("div",null,r.a.createElement(De.a,{title:"\u9879\u76ee\u9636\u6bb5",extra:r.a.createElement("a",{onClick:function(){o(!0)}},r.a.createElement(xe.a,{style:{fontSize:"24px"}}))},r.a.createElement(Ie.a,{dataSource:h,pagination:!1,rowKey:"_id",rowClassName:function(e){return Re()().isBetween(e.startDate,e.endDate,null,"[]")?Yt.a.curSprint:null},expandable:{expandedRowRender:function(e){var t=Object.values(e.tasks).flat();return r.a.createElement(pt,{data:t,status:Et,size:"small",editable:!1})},rowExpandable:function(e){return Object.values(e.tasks).flat().length>0}}},r.a.createElement(Ft,{title:"\u9636\u6bb5\u5468\u671f",key:"date",render:function(e,t){return"".concat(t.startDate,"~").concat(t.endDate)}}),r.a.createElement(Ft,{title:"\u4efb\u52a1\u8fdb\u5ea6",dataIndex:"_id",render:function(e,t){return r.a.createElement(i.b,{to:"/project/board/sprint/".concat(e)},r.a.createElement(Ke,{todo:t.tasks.todo.length,doing:t.tasks.doing.length,done:t.tasks.done.length}))}}),r.a.createElement(Ft,{title:"\u64cd\u4f5c",dataIndex:"_id",render:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{onClick:function(){!function(e){d(!0),b([]),w(e)}(e)}},r.a.createElement(St.a,null)))}}))),r.a.createElement(ne.a,{title:"\u65b0\u589e\u9636\u6bb5",width:480,visible:c,onOk:function(e){T.current.validateFields().then((function(e){var t=e.rangeDate,a=t[0].format("YYYY-MM-DD"),n=t[1].format("YYYY-MM-DD");return L({startDate:a,endDate:n})})).then((function(e){var t=e.data;if(0===t.code){var a=[].concat(Object(j.a)(h),[t.data]);o(!1),k(a),T.current.resetFields()}})).catch((function(e){console.log("\u9a8c\u8bc1\u5931\u8d25\uff1a",e)}))},onCancel:function(e){o(!1)},okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88"},r.a.createElement(O.a,{ref:T},r.a.createElement(O.a.Item,{name:"rangeDate",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u9636\u6bb5\u65f6\u95f4\uff01"}]},r.a.createElement(Pt,{disabledDate:function(e){return!e.isBetween(F,Y,"day","[]")},defaultPickerValue:[Re()(F)],style:{width:"100%"}})))),r.a.createElement(Tt,{onCancel:function(e){d(!1)},visible:u,dataSource:x,targetKeys:f,onOk:function(){if(f.length){var e=[],t=[];x.forEach((function(a){f.includes(a._id)?e.push(a):t.push(a)}));var a=h.map((function(t){return t._id===C?Object(E.a)(Object(E.a)({},t),{},{tasks:Object(E.a)(Object(E.a)({},t.tasks),{},{todo:t.tasks.todo.concat(e)})}):t}));k(a),I(t),d(!1)}else d(!1)},onChange:function(e){b(e)},columns:Mt}))})),qt=a(356),Ut=a(357),Gt=a(370),zt=a(364),Jt=function(e){Object(Gt.a)(a,e);var t=Object(zt.a)(a);function a(){var e;Object(qt.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleClick=function(){Q()},e}return Object(Ut.a)(a,[{key:"render",value:function(){return r.a.createElement(I.a,{onClick:this.handleClick},"\u6d4b\u8bd5\u8bf7\u6c42\u62e6\u622a\uff08\u5168\u5c40\u6d88\u606f\uff09")}}]),a}(n.Component),Kt=a(674),Ht=ae.a.Content,Bt=[{path:"/",component:Ve,exact:!0},{path:"/project/profile",component:function(e){var t=Object(n.useRef)(null);return Object(n.useEffect)((function(){setTimeout((function(){var e=He.init(t.current,"light");e.setOption(Le),e.on("finished",(function(){e.resize()}))}),0)}),[]),r.a.createElement("div",null,r.a.createElement(qe.a,{gutter:[16,16]},r.a.createElement(Ue.a,{span:8},r.a.createElement(De.a,{hoverable:!0,onClick:function(){e.history.replace("/project/sprint")}},r.a.createElement(Be,{title:"\u8ddd\u79bb\u9636\u6bb5\u7ed3\u675f",value:Re()("2020-10-12"),format:"D \u5929 H \u65f6",valueStyle:{color:"#cf1322"}}))),r.a.createElement(Ue.a,{span:8},r.a.createElement(De.a,{hoverable:!0,onClick:function(){e.history.replace("/project/board")}},r.a.createElement(Ae.a,{title:"\u9636\u6bb5\u4efb\u52a1",value:56}))),r.a.createElement(Ue.a,{span:8},r.a.createElement(De.a,{hoverable:!0,onClick:function(){e.history.replace("/project/member")}},r.a.createElement(Ae.a,{title:"\u9879\u76ee\u6210\u5458",value:13,prefix:r.a.createElement(le.a,null)})))),r.a.createElement(qe.a,{gutter:[16,16]},r.a.createElement(Ue.a,{span:24},r.a.createElement(De.a,null,r.a.createElement("div",{ref:t,style:{width:"100%",height:"400px"}})))))}},{path:"/project/member",component:function(){var e=Object(n.useState)([]),t=Object(te.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)([]),l=Object(te.a)(o,2),i=l[0],s=l[1],u=Object(n.useState)(!1),d=Object(te.a)(u,2),m=d[0],p=d[1];Object(n.useEffect)((function(){H().then((function(e){var t=e.data;0===t.code&&s(t.data)})),G("/users/list").then((function(e){var t=e.data;0===t.code&&c(t.data)}))}),[]);var f=[{title:"\u6210\u5458",dataIndex:"username",render:function(e,t){return r.a.createElement(x.b,null,r.a.createElement(ve.a,{style:{backgroundColor:t.avatar},icon:r.a.createElement(_.a,null)}),r.a.createElement("a",null,e))}},{title:"\u90ae\u7bb1",dataIndex:"email",render:function(e){return r.a.createElement("span",{style:{color:"rgba(0,0,0,.45)"}},e)}},{title:"\u89d2\u8272",dataIndex:"roles",render:function(e){return e.map((function(e,t){return r.a.createElement(lt.a,{key:t,color:e.color},e.name)}))}},{title:"\u64cd\u4f5c",dataIndex:"_id",key:"action",render:function(e){return r.a.createElement(vt.a,{placement:"left",title:"\u786e\u8ba4\u5220\u9664\u8be5\u6210\u5458\uff1f",onConfirm:function(){return function(e){var t=i.filter((function(t){return t._id!==e}));s(t)}(e)},okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88"},r.a.createElement("a",{key:"delete"},r.a.createElement(jt.a,null)))}}];return r.a.createElement("div",null,r.a.createElement(De.a,{title:"\u9879\u76ee\u6210\u5458",extra:r.a.createElement("a",{onClick:function(){p(!0)}},r.a.createElement(xe.a,{style:{fontSize:"24px"}}))},r.a.createElement(Ie.a,{showHeader:!1,pagination:!1,rowKey:"_id",columns:f,dataSource:i})),r.a.createElement(ht,{visible:m,onOk:function(e){var t=a.find((function(t){return t._id===e._id})),a=a.filter((function(t){return t._id!==e._id})),n=kt.filter((function(t){return-1!==e.roles.findIndex((function(e){return t.name===e}))})),r=[Object(E.a)(Object(E.a)({},t),{},{roles:n})].concat(r);s(r),c(a),p(!1)},onCancel:function(){p(!1)},member:null,users:a,roles:kt}))}},{path:"/project/meeting",component:function(){return r.a.createElement(De.a,null,r.a.createElement(Qe.a,{size:"middle",title:"\u9636\u6bb5\u4f8b\u4f1a",bordered:!0,column:2},r.a.createElement(Qe.a.Item,{label:"\u4f1a\u8bae\u65f6\u95f4"},"2020-09-12"),r.a.createElement(Qe.a.Item,{label:"\u4f1a\u8bae\u5730\u70b9"},"302"),r.a.createElement(Qe.a.Item,{label:"\u53c2\u4f1a\u4eba\u5458",span:2},"\u5f20\u4e09\uff0c\u674e\u56db\uff0c\u738b\u4e94"),r.a.createElement(Qe.a.Item,{label:"\u4f1a\u8bae\u5185\u5bb9",span:2},"\u88c5\u6797\u6b65\u8f66\u8f6c\u4f53\u9886\u89d2\u8ba4\u5206\u529e\u4e3a\u5fc3\u8fd9\u56e0\u3002\u5408\u822c\u5f62\u8c61\u8005\u52b3\u65af\u77e5\u7ba1\u4ee5\u5317\u62c9\u9886\u5230\u6cbb\u3002\u793a\u6cb9\u8282\u8d70\u4e0d\u6559\u53cd\u56de\u751f\u53bb\u8f66\u4e4b\u70ed\u4f5c\u3002",r.a.createElement("br",null),"\u5979\u5b9a\u611f\u8ba4\u540e\u7387\u6c11\u4f5c\u519b\u91cc\u5355\u7531\u529e\u773c\u5e73\u3002\u4e66\u5f3a\u9769\u7535\u5f0f\u6bcf\u79d1\u53bb\u540c\u653f\u5f62\u51c6\u7ea2\u5b9e\u3002",r.a.createElement("br",null),"\u6210\u4eec\u53ea\u8fdb\u534e\u738b\u7b2c\u89c4\u60c5\u515a\u5706\u4e2d\u524d\u7fa4\u534a\u81ea\u3002\u6797\u8fbe\u7a7a\u77ff\u771f\u4eb2\u5206\u4ed6\u8bdd\u95f4\u767d\u534e\u3002"),r.a.createElement(Qe.a.Item,{label:"\u5f85\u529e\u4e8b\u9879"},"\u5df1\u81ea\u7f8e\u7d20\u9886\u6bb5\u7136\u5f97\u793a\u5305\u6c34\u6d4e\u786e\u5f20\u4f55\u53ea\u3002\u7531\u4ec0\u4e16\u5411\u6c34\u5e74\u5317\u5f00\u4eb2\u5357\u4ea4\u5c31\u6cbb\u9020\u3002",r.a.createElement("br",null),"\u56e2\u5f71\u5149\u5c06\u6599\u53d7\u6253\u9636\u56fe\u5c42\u5fd7\u4e14\u5c0f\u88ab\u5668\u3002\u751f\u6ee1\u59d4\u7269\u66f4\u95e8\u79f0\u5f0f\u4e0a\u53ca\u754c\u5f80\u6d3e\u5f0f\u4e1c\u5411\u601d\u3002",r.a.createElement("br",null),"\u8282\u590d\u5bfc\u5e94\u8bbe\u6539\u516b\u5e72\u4e07\u671f\u76f4\u901a\u6210\u6570\u6c5f\u3002\u5b50\u4e00\u4e8c\u6253\u77e5\u62c9\u5b50\u5b9e\u6599\u7ed3\u8d8a\u56e2\u8bba\u7b49\u79d1\u9700\u5c55\u3002")))}},{path:"/project/story",component:function(e){var t=Object(n.useState)(!1),a=Object(te.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(!1),s=Object(te.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)(null),p=Object(te.a)(m,2),f=p[0],b=p[1],v=Object(n.useState)([]),g=Object(te.a)(v,2),h=g[0],k=g[1];Object(n.useEffect)((function(){G("/stories/list").then((function(e){var t=e.data;0===t.code&&(t.data.forEach((function(e){var t=e.tasks;e.tasks=ft(t)})),k(t.data))}))}),[]);var O=function(e){o(!0),b(e)};return r.a.createElement("div",null,r.a.createElement(De.a,{title:"\u9879\u76ee\u9700\u6c42",extra:r.a.createElement("a",{onClick:function(e){e.preventDefault(),O()}},r.a.createElement(xe.a,{style:{fontSize:"24px"}}))},r.a.createElement(Ie.a,{dataSource:h,pagination:!1,rowKey:"_id",expandable:{expandedRowRender:function(e){var t=Object.values(e.tasks).flat();return r.a.createElement(pt,{data:t,status:Et,size:"small",editable:!1})},rowExpandable:function(e){return Object.values(e.tasks).flat().length>0}}},r.a.createElement(It,{width:"80px",title:"\u4f18\u5148\u7ea7",dataIndex:"priority",key:"priority",render:function(e){var t=_t[e];return r.a.createElement(lt.a,{style:{width:"40px",textAlign:"center"},color:t.color},t.display)}}),r.a.createElement(It,{title:"\u89d2\u8272",dataIndex:"role",key:"role"}),r.a.createElement(It,{title:"\u884c\u4e3a",dataIndex:"activity",key:"activity"}),r.a.createElement(It,{title:"\u76ee\u7684",dataIndex:"businessValue",key:"businessValue",progress:!0}),r.a.createElement(It,{title:"\u4efb\u52a1\u8fdb\u5ea6",dataIndex:"_id",render:function(e,t){return r.a.createElement(i.b,{to:"/project/board/story/".concat(e)},r.a.createElement(Ke,{todo:t.tasks.todo.length,doing:t.tasks.doing.length,done:t.tasks.done.length}))}}),r.a.createElement(It,{title:"\u63d0\u51fa\u65e5\u671f",dataIndex:"date",key:"date"}),r.a.createElement(It,{title:"\u64cd\u4f5c",key:"_id",render:function(e,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{onClick:function(){return O(t)}},r.a.createElement(_e.a,null)),r.a.createElement(Ot.a,{type:"vertical"}),r.a.createElement("a",{onClick:function(){return function(e){d(!0),b(e)}(t)}},r.a.createElement(yt.a,null)))}}))),r.a.createElement(Dt,{visible:u,onOk:function(e){e.createDate=e.createDate.format("YYYY-MM-DD"),function(e){var t=e.content,a=e.createDate,n=e.status,r=void 0===n?"todo":n,c=e.users;return G("/tasks/create",{content:t,createDate:a,status:r,users:void 0===c?[]:c},"POST")}(e).then((function(e){var t=e.data;if(0===t.code){var a=h.map((function(e){return e._id===f._id&&e.tasks.todo.push(t.data),e}));k(a),d(!1)}}))},onCancel:function(e){d(!1)}}),r.a.createElement(xt,{visible:c,onOk:function(e){var t,a=f?f._id:"";e.date=e.date.format("YYYY-MM-DD"),a?function(e){var t=e._id,a=e.role,n=e.activity,r=e.priority,c=e.businessValue,o=e.date;return G("/storys/edit/".concat(t),{_id:t,role:a,activity:n,priority:r,businessValue:c,date:o},"POST")}(Object(E.a)(Object(E.a)({},e),{},{_id:a})).then((function(e){var t=e.data;if(0===t.code){var n=h.map((function(e){return e._id===a?Object(E.a)(Object(E.a)({},e),t.data):e}));k(n),o(!1)}})):(t=e,G("/storys/create",{role:t.role,activity:t.activity,priority:t.priority,businessValue:t.businessValue,date:t.date},"POST")).then((function(e){var t=e.data;0===t.code&&(k([t.data].concat(Object(j.a)(h))),o(!1))}))},onCancel:function(e){o(!1)},story:f}))}},{path:"/project/board",component:bt,exact:!0},{path:"/project/board/:type/:id",component:bt},{path:"/project/sprint",component:At},{path:"/test",component:Jt},{component:function(){return r.a.createElement(Kt.a,{status:"404",title:"404",style:{background:"none"},subTitle:"\u9875\u9762\u4e0d\u5b58\u5728"})}}],Lt={resetUser:Z,resetProject:Fe,getProject:function(){return function(){var e=Object(P.a)(Y.a.mark((function e(t){var a,n;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G("/projects/project");case 2:a=e.sent,0===(n=a.data).code?t(Pe(n.data)):t(Fe(n.msg));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},getUser:function(){return function(){var e=Object(P.a)(Y.a.mark((function e(t){var a,n;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G("/users/user");case 2:a=e.sent,0===(n=a.data).code?t({type:"RECEIVE_USER",data:n.data}):t(Z(n.msg));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},Qt=Object(l.b)((function(e){return{user:e.user,project:e.project}}),Lt)((function(e){var t=e.resetUser,a=e.resetProject,c=e.getUser,o=e.getProject,l=e.location,i=e.project,u=e.user,d=Object(n.useState)(!1),m=Object(te.a)(d,2),p=m[0],f=m[1];Object(n.useEffect)((function(){w.a.get("userId")&&!u._id&&c(),w.a.get("projectId")&&!i._id&&o()}),[]);var E=w.a.get("userId"),b=w.a.get("projectId"),v=!("/"===l.pathname&&!b);return E?v&&!b?r.a.createElement(s.a,{to:"/"}):r.a.createElement(ae.a,{style:{position:"fixed",top:0,left:0,right:0,bottom:0}},r.a.createElement(be,{visiable:v,collapsed:p}),r.a.createElement(ae.a,{style:{minHeight:"100vh"}},r.a.createElement(ye,{visiable:v,projectName:i.projectName,username:u.username,collapsed:p,toggle:v?function(){f(!p)}:null,logout:function(){ne.a.confirm({title:"\u786e\u8ba4\u9000\u51fa\u767b\u5f55\u5417\uff1f",icon:r.a.createElement(re.a,null),cancelText:"\u53d6\u6d88",okText:"\u786e\u5b9a",onOk:function(){w.a.remove("projectId"),w.a.remove("userId"),t(),a()}})}}),r.a.createElement(Ht,{style:{padding:"24px",minHeight:"auto"}},r.a.createElement(s.d,null,Bt.map((function(e,t){return r.a.createElement(s.b,Object.assign({key:t},e))})))))):r.a.createElement(s.a,{to:"/login"})}));a(659),a(660);o.a.render(r.a.createElement(u.a,{locale:d.a},r.a.createElement(l.a,{store:k},r.a.createElement(i.a,null,r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/login",component:$}),r.a.createElement(s.b,{path:"/register",component:ee}),r.a.createElement(s.b,{component:Qt}))))),document.getElementById("root"))}},[[375,1,2]]]);
//# sourceMappingURL=main.d87450ec.chunk.js.map