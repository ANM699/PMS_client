(this.webpackJsonppms=this.webpackJsonppms||[]).push([[13],{430:function(e,t,a){"use strict";var n=a(0),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},r=a(23),l=function(e,t){return n.createElement(r.a,Object.assign({},e,{ref:t,icon:c}))};l.displayName="PlusCircleOutlined";t.a=n.forwardRef(l)},674:function(e,t,a){"use strict";a.r(t);var n=a(7),c=a(2),r=a(31),l=a(0),o=a.n(l),i=a(63),u=a(28),s=a.n(u),d=a(346),m=a(667),f=a(362),p=a(430),j=a(666),b=a(677),E=j.a.Column;function v(e){var t=e.data;return o.a.createElement(j.a,{dataSource:t,pagination:!1,showHeader:!1,rowKey:"_id"},o.a.createElement(E,{title:"\u4fe1\u606f",dataIndex:"projectName",key:"projectName",render:function(t,a){return o.a.createElement(o.a.Fragment,null,o.a.createElement("h4",null,o.a.createElement("a",{onClick:function(){return e.onConfirm(a)}},t)),o.a.createElement("div",{style:{color:"rgba(0,0,0,.45)",marginTop:"4px"}},a.description))}}),o.a.createElement(E,{title:"\u65f6\u95f4",key:"date",render:function(e,t){return"".concat(t.startDate,"~").concat(t.endDate)}}),o.a.createElement(E,{title:"\u64cd\u4f5c",dataIndex:"_id",key:"action",render:function(t,a){return o.a.createElement("a",{onClick:function(t){t.preventDefault(),e.onItemEditClick(a)}},o.a.createElement(b.a,null))}}))}var h=a(665),O=a(345),k=a(343),g=a(190),C=a.n(g),D=h.a.RangePicker;function w(e){var t=e.visible,a=e.onOk,n=e.onCancel,i=e.project,u=O.a.useForm(),s=Object(r.a)(u,1)[0];return Object(l.useEffect)((function(){if(i){var e=[C()(i.startDate),C()(i.endDate)];s.setFieldsValue(Object(c.a)(Object(c.a)({},i),{},{rangeDate:e}))}else s.resetFields()})),o.a.createElement(d.a,{forceRender:!0,title:i?"\u7f16\u8f91\u9879\u76ee":"\u521b\u5efa\u9879\u76ee",width:640,visible:t,onOk:function(){s.validateFields().then((function(e){a(e)})).catch((function(e){console.log("\u9a8c\u8bc1\u5931\u8d25\uff1a",e)}))},onCancel:n,okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88"},o.a.createElement(O.a,{form:s,labelCol:{span:5},wrapperCol:{span:16}},o.a.createElement(O.a.Item,{name:"projectName",label:"\u9879\u76ee\u540d\u79f0",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u9879\u76ee\u540d\u79f0\uff01"}]},o.a.createElement(k.a,{placeholder:"\u8bf7\u8f93\u5165"})),o.a.createElement(O.a.Item,{name:"rangeDate",label:"\u9879\u76ee\u65f6\u95f4",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u9879\u76ee\u65f6\u95f4\uff01"}]},o.a.createElement(D,{style:{width:"100%"}})),o.a.createElement(O.a.Item,{name:"description",label:"\u9879\u76ee\u7b80\u4ecb",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u81f3\u5c11\u4e94\u4e2a\u5b57\u7b26\u7684\u9879\u76ee\u7b80\u4ecb\uff01",min:5}]},o.a.createElement(k.a.TextArea,{rows:4,placeholder:"\u8bf7\u8f93\u5165\u81f3\u5c11\u4e94\u4e2a\u5b57\u7b26"}))))}var x=a(136),y=a(75),I={switchProject:x.c};t.default=Object(i.b)((function(e){return{project:e.project}}),I)((function(e){var t=Object(l.useState)(!1),a=Object(r.a)(t,2),i=a[0],u=a[1],j=Object(l.useState)([]),b=Object(r.a)(j,2),E=b[0],h=b[1],O=Object(l.useState)(null),k=Object(r.a)(O,2),g=k[0],C=k[1];Object(l.useEffect)((function(){Object(y.k)().then((function(e){var t=e.data;0===t.code&&h(t.data)}))}),[]);var D=function(e){u(!0),C(e)};return o.a.createElement("div",null,o.a.createElement(m.a,{title:"\u6211\u7684\u9879\u76ee",extra:o.a.createElement("a",{onClick:function(e){e.preventDefault(),D()}},o.a.createElement(p.a,{style:{fontSize:"24px"}}))},o.a.createElement(v,{data:E,onConfirm:function(t){d.a.confirm({title:"\u9009\u62e9\u5e76\u5207\u6362\u81f3\u8be5\u9879\u76ee\uff1f",icon:o.a.createElement(f.a,null),cancelText:"\u53d6\u6d88",okText:"\u786e\u5b9a",onOk:function(){e.switchProject(t),s.a.set("projectId",t._id),e.history.push("/project/profile")}})},onItemEditClick:D})),o.a.createElement(w,{visible:i,onOk:function(t){var a=g?g._id:"",r=t.rangeDate;t.startDate=r[0].format("YYYY-MM-DD"),t.endDate=r[1].format("YYYY-MM-DD"),a?Object(y.e)(Object(c.a)(Object(c.a)({},t),{},{_id:a})).then((function(t){var n=t.data;if(0===n.code){var c=E.map((function(e){return e._id===a?n.data:e}));u(!1),h(c),a===e.project._id&&e.switchProject(n.data)}})):Object(y.a)(t).then((function(e){var t=e.data;0===t.code&&(u(!1),h([t.data].concat(Object(n.a)(E))))}))},onCancel:function(){u(!1)},project:g}))}))}}]);
//# sourceMappingURL=13.13673fcd.chunk.js.map